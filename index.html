<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Reembolso</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
</head>
<body>
    <h1>Calculadora de Reembolso</h1>
    <label for="habitantes">Digite o número de habitantes:</label>
    <input type="number" id="habitantes" />
    <button onclick="calcular()">Calcular</button>

    <h2>Resultados:</h2>
    <p id="resultado"></p>

    <!-- Botão para gerar PDF -->
    <button onclick="gerarPDF()">Gerar PDF</button>

    <script>
        function calcular() {
            const habitantes = parseInt(document.getElementById('habitantes').value);
            const lesao = Math.floor(habitantes * 0.0187);
            const lesao_grave = Math.floor(lesao * 0.20);
            const procedimentos = lesao_grave * 4;
            const reembolso = procedimentos * 32.40;
            const reembolso_anual = reembolso * 12;

            const habitantes_formatado = habitantes.toLocaleString('pt-BR');
            const lesao_formatado = lesao.toLocaleString('pt-BR');
            const lesao_grave_formatado = lesao_grave.toLocaleString('pt-BR');
            const procedimentos_formatado = procedimentos.toLocaleString('pt-BR');
            const reembolso_formatado = reembolso.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
            const reembolso_anual_formatado = reembolso_anual.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });

            document.getElementById('resultado').innerHTML = `
            Habitantes: ${habitantes_formatado}<br>
            Lesão: ${lesao_formatado}<br>
            Lesão Grave: ${lesao_grave_formatado}<br>
            Procedimentos: ${procedimentos_formatado}<br>
            Reembolso: ${reembolso_formatado}<br>
            Reembolso Anual: ${reembolso_anual_formatado}
            `;
        }

        function gerarPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Captura o conteúdo da área de resultados
            const titulo = document.querySelector('h1').innerText;
            const resultados = document.getElementById('resultado').innerText;

            // Define a formatação no PDF
            doc.setFontSize(16);
            doc.text(titulo, 10, 10);
            doc.setFontSize(12);
            doc.text(resultados, 10, 20);

            // Salva o PDF com o nome desejado
            doc.save('resultado_reembolso.pdf');
        }
    </script>
</body>
</html>
